#!/usr/bin/env python
# -*- coding: utf-8 -*-

from datetime import datetime
from requests import get
from sys import argv, stdout
from xml.etree.cElementTree import dump, fromstring

def parse_date(text):
    return datetime.strptime(text, '%Y-%m-%d').date()

date_from = parse_date(argv[1])
url = 'http://www.pubmedcentral.nih.gov/utils/oa/oa.fcgi?from=%s' % \
    date_from.isoformat()
request = get(url)

tree = fromstring(request.text)
for record in tree.iterfind('*//record'):
    stdout.write(record.attrib['id'])
    stdout.write(' ')
